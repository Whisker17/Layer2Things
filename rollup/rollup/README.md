# Rollup

Rollup 就是**链下的计算**+**链上的数据**+**Fraud proof**。然后它最关键的一个点就是**不是所有数据都在链上，它的链上数据仅仅限于它每一笔交易的输入，但不包括它的最终状态**。比如说，你从 a 走到 b ，我只是把路径告诉你了；但是你具体在 a 做了什么事，在 b 做了什么事，这种状态是记录在**链下**的。

任何人任何用户都可以去看 Rollup 的区块，也就是**打包后的交易**，然后把它这个状态的转移重新更换。如果状态转移是错的，用户就可以在链上提交 Fraud proof ，并**将验证人淘汰掉**。因为验证人在链上是有质押的，如果他作恶的话，他的质押会被没收掉。且虽然不是每一笔 Rollup 都会进行验证，但是验证人会一直跑，一旦发现有 Fraud （比如说 A 给 B 发了 1 块钱，但记录的是 A 给 B 发了 3 块钱），就可以拿到相应奖励。这个过程可以理解为**任何人都可以进行抽查以及督察**。

他的好处是**数据都在链上，可以任凭用户随时去验证，不会出现像 Plasma 那样的数据可用性问题**。且**验证的结果具有唯一性**，验证人链下把这个智能合约跑一遍，就会发现验证链下的计算是否按照链上的智能合约。从经济学角度来说，一般的验证人不太会去做恶，因为他的质押额太大了。

Rollup 和 Plasma 其实非常类似。只是 **Rollup 把数据放到链上去**，Fraud Proof 的过程会非常简单。 Rollup 的 TPS 会在主链的几百倍左右，一般是在几百上千的级别；根据不同业务，如果应用简单一些的话，应该可以做到几千级别。而 Plasma 的 TPS 最高能到上万。

Rollup 方案可以被认为一种压缩技术，多笔交易可以压缩在一起（几千笔交易可以被打包到一个 Rollup 区块中），既能减少交易数据规模，又能降低交易验证负担，因此使得以太坊区块链能处理更多交易，tps 可达到 3000 左右。它是将所有 layer2 上的交易数据，也就是 Rollup 区块的快照发送到主链上某个智能合约内，用主链上的单个合约来保管所有的资金，而 Rollup 则通过在主链上为每一笔交易公开一些数据，让任何人都能通过观察区块链上的 calldata （交易输入数据）来获得 layer2 的所有数据。Rollup 区块的状态是由用户以及链下运营者来维护的，因此不会占用主链的存储空间。所有交易的收据都存储在以太坊区块链上，这就提升了 Layer2 交易的安全性。